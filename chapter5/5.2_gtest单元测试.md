# 5.2 gtest单元测试

gtest是Google的一套用于编写C++测试的框架，可以运行在很多平台上（包括Linux、Mac OS X、Windows、Cygwin等等）。基于xUnit架构。支持很多好用的特性，包括自动识别测试、丰富的断言、断言自定义、死亡测试、非终止的失败、生成XML报告等等。

* [1.gtest的优点](#1)
* [2.搭建测试框架](#2)
* [3.测试Demo](#3)
* [4.搭建测试工程](#4)



<h2 id="1">1.gtest的优点</h2>

好的测试应该有下面的这些特点，我们看看GTest是如何满足要求的。
* 测试应该是独立的、可重复的。一个测试的结果不应该作为另一个测试的前提。GTest中每个测试运行在独立的对象中。如果某个测试失败了，可以单独地调试它。
* 测试应该是有清晰的结构的。GTest的测试有很好的组织结构，易于维护。
* 测试应该是可移植和可复用的。有很多代码是不依赖平台的，因此它们的测试也需要不依赖于平台。GTest可以在多种操作系统、多种编译器下工作，有很好的可移植性。
* 测试失败时，应该给出尽可能详尽的信息。GTest在遇到失败时并不停止接下来的测试，而且还可以选择使用非终止的失败来继续执行当前的测试。这样一次可以测试尽可能多的问题。
* 测试框架应该避免让开发者维护测试框架相关的东西。GTest可以自动识别定义的全部测试，你不需要一一列举它们。
* 测试应该够快。GTest在满足测试独立的前提下，允许你复用共享数据，它们只需创建一次。
* GTest采用的是xUnit架构，你会发现和JUnit、PyUnit很类似，所以上手非常快。

<h2 id="2">2.搭建测试框架</h2>
gtest下载地址：[https://github.com/google/googletest](https://github.com/google/googletest)  
下载方法是：git clone https://github.com/google/googletest.git
安装方法是：  
```
$ cd googletest
$ cmake .
$ make
```  
然后在lib目录下会生成：libgmock.a  libgmock_main.a  libgtest.a  libgtest_main.a  
最后我们再`sudo make install`。

<h2 id="3">3.测试Demo</h2>



